# Easy MCP Server

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Node.js Version](https://img.shields.io/badge/node-%3E%3D16.0.0-brightgreen.svg)](https://nodejs.org/)

## üöÄ **One Function ‚Üí Everything**

**Write ONE function, get ALL of this:**
- ‚úÖ **REST API** - Instant HTTP endpoints
- ‚úÖ **MCP Tools** - AI models can call your functions
- ‚úÖ **MCP Prompts** - Template-based prompts with parameters
- ‚úÖ **MCP Resources** - Documentation and data access
- ‚úÖ **OpenAPI** - Complete API documentation
- ‚úÖ **Swagger UI** - Interactive API explorer
- ‚úÖ **LLM.txt** - AI context and framework info
- ‚úÖ **Agent.md** - Comprehensive agent context

---

## ‚ö° **Extremely Simple Rules**

### **File Path = API Path**
```
api/users/profile/get.js  ‚Üí  GET /users/profile
api/products/post.js      ‚Üí  POST /products
api/orders/123/put.js     ‚Üí  PUT /orders/123
```

### **File Name = HTTP Method**
```
get.js     ‚Üí  GET
post.js    ‚Üí  POST
put.js     ‚Üí  PUT
patch.js   ‚Üí  PATCH
delete.js  ‚Üí  DELETE
```

### **One Function = Everything**
```javascript
const BaseAPI = require('easy-mcp-server/base-api');

class MyAPI extends BaseAPI {
  process(req, res) {
    res.json({ message: 'Hello World' });
  }
}

module.exports = MyAPI;
```

**That's it!** You now have:
- REST endpoint at `/my-api`
- MCP tool for AI models
- OpenAPI documentation
- Swagger UI integration

---

## üéØ **Quick Start (30 seconds)**

### 1. Install
```bash
npm install -g easy-mcp-server
```

### 2. Create Project
```bash
easy-mcp-server init my-api
cd my-api
npm install
```

### 3. Start Server
```bash
easy-mcp-server
```

### 4. Access Everything
- **REST API**: `http://localhost:3000`
- **MCP Server**: `http://localhost:3001` (for AI models)
- **OpenAPI**: `http://localhost:3000/openapi.json`
- **Swagger UI**: `http://localhost:3000/docs`
- **LLM Context**: `http://localhost:3000/LLM.txt`
- **Agent Context**: `http://localhost:3000/Agent.md`
- **MCP Inspector**: `npx @modelcontextprotocol/inspector`

---

## üí¨ **MCP Support (New Standard)**

### **MCP Tools** - AI Models Call Your Functions
```javascript
// Your function automatically becomes an MCP tool
class UserAPI extends BaseAPI {
  process(req, res) {
    const { name, email } = req.body;
    res.json({ user: { name, email, id: Date.now() } });
  }
}
// AI models can now call this function via MCP!
```

### **MCP Prompts** - Template-Based Prompts
```javascript
class PromptAPI extends BaseAPI {
  constructor() {
    super();
    this.prompts = [{
      name: 'code_review',
      description: 'Review code for best practices',
      template: 'Please review this {{language}} code:\n\n```{{language}}\n{{code}}\n```',
      arguments: [
        { name: 'language', description: 'Programming language', required: true },
        { name: 'code', description: 'Code to review', required: true }
      ]
    }];
  }
}
```

### **MCP Resources** - Documentation & Data Access
```javascript
class ResourceAPI extends BaseAPI {
  constructor() {
    super();
    this.resources = [{
      uri: 'config://server-settings',
      name: 'Server Configuration',
      description: 'Current server settings',
      mimeType: 'application/json',
      content: JSON.stringify({ port: 3000, features: ['tools', 'prompts', 'resources'] })
    }];
  }
}
```

---

## üìù **Annotations (Optional)**

Add JSDoc annotations for rich schemas:

```javascript
/**
 * @description Create a new user with validation
 * @summary Create user endpoint
 * @tags users,authentication
 * @requestBody {
 *   "type": "object",
 *   "required": ["name", "email"],
 *   "properties": {
 *     "name": { "type": "string", "minLength": 2 },
 *     "email": { "type": "string", "format": "email" }
 *   }
 * }
 * @responseSchema {
 *   "type": "object",
 *   "properties": {
 *     "success": { "type": "boolean" },
 *     "data": { "type": "object" }
 *   }
 * }
 */
class CreateUser extends BaseAPI {
  process(req, res) {
    const { name, email } = req.body;
    res.json({ success: true, data: { name, email, id: Date.now() } });
  }
}
```

---

## üî• **Key Features**

- **üîç Auto Discovery** - Scan `api/` directory, find endpoints automatically
- **ü§ñ Instant MCP** - Your functions become AI tools in real-time
- **üìö Auto OpenAPI** - Complete API documentation generated automatically
- **‚ö° Hot Reloading** - Save file = instant update across all interfaces
- **üí¨ MCP Prompts** - Template-based prompts with parameter substitution
- **üìÑ MCP Resources** - Access to documentation, configuration, and data
- **üåê Multiple Transports** - HTTP, WebSocket, Server-Sent Events
- **üìù Annotation Support** - JSDoc annotations for custom schemas
- **ü§ñ AI Context** - LLM.txt and Agent.md for comprehensive AI integration
- **üöÄ Enhanced Utilities** - Redis caching, LLM integration, structured logging
- **üìä Standardized Responses** - Consistent API response formatting
- **üîß WordPress Integration** - Source management and duplicate detection

---

## üéØ **Use Cases**

- **AI Integration** - Expose your APIs to AI models via MCP
- **Rapid Prototyping** - Build APIs in minutes, not hours
- **Microservices** - Create lightweight, focused API services
- **AI Tools** - Build custom tools for AI assistants
- **API Documentation** - Auto-generate complete OpenAPI specs
- **AI Prompt Engineering** - Create reusable prompt templates
- **Knowledge Management** - Provide AI models access to documentation

---

## üñ•Ô∏è **CLI Commands**

```bash
easy-mcp-server                    # Start server
easy-mcp-server init <project>     # Create new project
easy-mcp-server --port 8080        # Custom port
easy-mcp-server --help             # Show all options
```

---

## ‚öôÔ∏è **Configuration**

### Environment Variables (.env)
```bash
PORT=3000                          # API server port
MCP_PORT=3001                      # MCP server port
NODE_ENV=development               # Environment
MCP_INFO_HTML_PATH=/path/to/custom.html  # Custom MCP info page
```

### Custom MCP Info Page

You can provide your own HTML file for the MCP info page:

- **Project root:** Create `mcp-info.html` in your project directory
- **Environment variable:** Set `MCP_INFO_HTML_PATH` to any HTML file path
- **Example template:** Use `mcp-info-example.html` as a starting point

---

## ü§ñ **AI Model Integration**

### **AI Context Files**
Easy MCP Server provides comprehensive context for AI models:

- **`/LLM.txt`** - Framework context and usage patterns for LLMs
- **`/Agent.md`** - Detailed agent context with implementation examples
- **MCP Integration** - Full MCP 2024-11-05 compliance with tools, prompts, and resources

### **MCP Inspector** (Recommended)
```bash
npx @modelcontextprotocol/inspector
# Connect to: http://localhost:3001
# Type: Streamable HTTP
```

### **Available MCP Commands**
- `tools/list` - List all API endpoints as tools
- `tools/call` - Execute an API endpoint
- `prompts/list` - List all prompt templates
- `prompts/get` - Get prompt with parameter substitution
- `resources/list` - List all available resources
- `resources/read` - Read resource content
- `ping` - Health check

### **Example MCP Usage**
```json
// List all tools
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "tools/list"
}

// Call a tool
{
  "jsonrpc": "2.0",
  "id": 2,
  "method": "tools/call",
  "params": {
    "name": "post_users",
    "arguments": {
      "body": { "name": "John", "email": "john@example.com" }
    }
  }
}

// Get a prompt
{
  "jsonrpc": "2.0",
  "id": 3,
  "method": "prompts/get",
  "params": {
    "name": "code_review",
    "arguments": {
      "language": "javascript",
      "code": "console.log('hello');"
    }
  }
}
```

---

## üöÄ **Enhanced Utilities (New!)**

Easy MCP Server now includes powerful utilities for production-ready applications:

### **BaseAPIEnhanced** - Enhanced API Class
```javascript
const { BaseAPIEnhanced } = require('easy-mcp-server/lib/base-api-enhanced');

class MyAPI extends BaseAPIEnhanced {
  constructor() {
    super('my-service', {
      redis: { host: 'localhost', port: 6379 },
      llm: { provider: 'openai', apiKey: process.env.OPENAI_API_KEY }
    });
  }

  async handleRequest(req, res) {
    // Redis caching available via this.redis
    // LLM services available via this.llm
    // Standardized responses via this.responseUtils
    // MCP resources via this.prompts and this.resources
  }
}
```

### **APIResponseUtils** - Standardized Responses
```javascript
const APIResponseUtils = require('easy-mcp-server/lib/api-response-utils');

// Standardized error responses
APIResponseUtils.sendValidationErrorResponse(res, errors);
APIResponseUtils.sendNotFoundResponse(res, 'User');

// Success responses
APIResponseUtils.sendSuccessResponse(res, { data: result });
APIResponseUtils.sendPaginatedResponse(res, data, pagination);
```

### **RedisClient** - Caching & Session Management
```javascript
const RedisClient = require('easy-mcp-server/lib/redis-client');

const redis = new RedisClient('my-service');
await redis.init();

// Automatic JSON serialization/deserialization
await redis.set('key', { data: 'value' }, 3600);
const data = await redis.get('key');
```

### **LLMService** - AI Integration
```javascript
const { createLLMService } = require('easy-mcp-server/lib/llm-service');

const llm = createLLMService({
  provider: 'openai',
  apiKey: process.env.OPENAI_API_KEY
});

const result = await llm.generate('Hello world');
```

### **Logger** - Structured Logging
```javascript
const Logger = require('easy-mcp-server/utils/logger');

const logger = new Logger({ service: 'my-api', level: 'info' });
logger.info('Request processed', { userId: 123 });
logger.logRequest(req);
logger.logMCPCall('tool', params, result, duration);
```

---

## üìÅ **Project Structure**

### **Basic Structure**
```
my-api/
‚îú‚îÄ‚îÄ api/                          # API endpoints
‚îÇ   ‚îú‚îÄ‚îÄ users/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ get.js               # GET /users
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ post.js              # POST /users
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ profile/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ get.js           # GET /users/profile
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ put.js           # PUT /users/profile
‚îÇ   ‚îî‚îÄ‚îÄ products/
‚îÇ       ‚îú‚îÄ‚îÄ get.js               # GET /products
‚îÇ       ‚îî‚îÄ‚îÄ post.js              # POST /products
‚îú‚îÄ‚îÄ mcp/                          # Custom MCP content (optional)
‚îÇ   ‚îú‚îÄ‚îÄ prompts/                 # Your custom prompts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ my-prompt.json
‚îÇ   ‚îî‚îÄ‚îÄ resources/               # Your custom resources
‚îÇ       ‚îî‚îÄ‚îÄ my-guide.md
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ .env
```

### **Enhanced Structure (with utilities)**
```
my-api/
‚îú‚îÄ‚îÄ api/                          # API endpoints
‚îú‚îÄ‚îÄ mcp/                          # Custom MCP content
‚îú‚îÄ‚îÄ src/                          # Framework source code
‚îÇ   ‚îú‚îÄ‚îÄ lib/                      # Core library utilities
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api-response-utils.js # Standardized responses
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base-api-enhanced.js  # Enhanced API class
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ redis-client.js       # Redis integration
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ llm-service.js        # LLM integration
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ wordpress-source-manager.js # WordPress integration
‚îÇ   ‚îú‚îÄ‚îÄ utils/                    # Utility classes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger.js             # Structured logging
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ resource-loader.js    # MCP resource management
‚îÇ   ‚îú‚îÄ‚îÄ prompts/                  # Framework default prompts
‚îÇ   ‚îî‚îÄ‚îÄ resources/                # Framework default resources
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ .env
```

---

## üí° **Best Practices**

### **File Organization**
- Group related endpoints in directories
- Use descriptive file names
- Follow REST conventions

### **API Design**
- Use resource-based URLs (`/users`, `/users/:id`)
- Return consistent response formats
- Use appropriate HTTP methods

### **Annotations**
- Use `@description` for detailed explanations
- Use `@tags` to group related endpoints
- Define `@requestBody` for POST/PUT endpoints
- Document `@errorResponses` for error cases

---

## üöÄ **Examples Included**

The project includes working examples:

- **`api/example/`** - Basic API endpoints (GET, POST, PUT, PATCH, DELETE)
- **`api/prompt-example/`** - MCP prompts with template substitution
- **`api/resource-example/`** - MCP resources with multiple MIME types

---

## üîß **How It Works**

1. **Scan** `api/` directory for endpoint files
2. **Parse** JSDoc annotations for schemas
3. **Generate** OpenAPI specs + MCP tools + documentation
4. **Serve** everything on multiple ports and protocols

---

## üéØ **The Future of API Development**

**Write Once, Deploy Everywhere**

**One function = REST API + MCP Tools + MCP Prompts + MCP Resources + OpenAPI Documentation + LLM Context + Agent Context**

### **Complete MCP 2024-11-05 Support**
- ‚úÖ **Tools** - Auto-discovery of API endpoints as MCP tools
- ‚úÖ **Prompts** - Template-based prompts with parameter substitution  
- ‚úÖ **Resources** - Access to documentation, configuration, and data
- ‚úÖ **Multiple Transports** - HTTP, WebSocket, and Server-Sent Events
- ‚úÖ **Real-time Updates** - Hot reloading across all MCP interfaces
- ‚úÖ **Rich Schemas** - OpenAPI integration for input/output validation

---

**üéâ Start building AI-integrated APIs in seconds!**